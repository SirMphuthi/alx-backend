{"{\"assumptions\":{},\"sourceRoot\":\"/alx-backend/0x03-queuing_system_in_js/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/alx-backend/0x03-queuing_system_in_js\",\"filename\":\"/alx-backend/0x03-queuing_system_in_js/9-stock.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-backend/0x03-queuing_system_in_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-backend/0x03-queuing_system_in_js/node_modules/@babel/preset-env/lib/index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-backend/0x03-queuing_system_in_js/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _redis = _interopRequireDefault(require(\"redis\"));\nvar _util = require(\"util\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar listProducts = [{\n  Id: 1,\n  name: 'Suitcase 250',\n  price: 50,\n  stock: 4\n}, {\n  Id: 2,\n  name: 'Suitcase 450',\n  price: 100,\n  stock: 10\n}, {\n  Id: 3,\n  name: 'Suitcase 650',\n  price: 350,\n  stock: 2\n}, {\n  Id: 4,\n  name: 'Suitcase 1050',\n  price: 550,\n  stock: 5\n}];\nfunction getItemById(id) {\n  return listProducts.find(function (item) {\n    return item.Id === id;\n  });\n}\nvar client = _redis[\"default\"].createClient();\nclient.on('connect', function () {\n  console.log('Redis client connected to the server');\n});\nclient.on('error', function (err) {\n  console.log(\"Redis client not connected to the server: \".concat(err.message));\n});\nvar getAsync = (0, _util.promisify)(client.get).bind(client);\nvar setAsync = (0, _util.promisify)(client.set).bind(client);\nfunction reserveStockById(itemId, stock) {\n  return setAsync(\"item.\".concat(itemId), stock);\n}\nfunction getCurrentReservedStockById(_x) {\n  return _getCurrentReservedStockById.apply(this, arguments);\n}\nfunction _getCurrentReservedStockById() {\n  _getCurrentReservedStockById = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(itemId) {\n    var reservedStock;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          _context3.n = 1;\n          return getAsync(\"item.\".concat(itemId));\n        case 1:\n          reservedStock = _context3.v;\n          return _context3.a(2, reservedStock ? parseInt(reservedStock) : null);\n      }\n    }, _callee3);\n  }));\n  return _getCurrentReservedStockById.apply(this, arguments);\n}\nlistProducts.forEach(function (item) {\n  reserveStockById(item.Id, item.stock);\n});\nvar app = (0, _express[\"default\"])();\nvar port = 1245;\napp.get('/list_products', function (req, res) {\n  var products = listProducts.map(function (item) {\n    return {\n      itemId: item.Id,\n      itemName: item.name,\n      price: item.price,\n      initialAvailableQuantity: item.stock\n    };\n  });\n  res.json(products);\n});\napp.get('/list_products/:itemId', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var itemId, product, currentQuantity, availableQuantity;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          itemId = parseInt(req.params.itemId);\n          product = getItemById(itemId);\n          if (product) {\n            _context.n = 1;\n            break;\n          }\n          return _context.a(2, res.json({\n            status: 'Product not found'\n          }));\n        case 1:\n          _context.n = 2;\n          return getCurrentReservedStockById(itemId);\n        case 2:\n          currentQuantity = _context.v;\n          availableQuantity = currentQuantity !== null ? currentQuantity : product.stock;\n          res.json({\n            itemId: product.Id,\n            itemName: product.name,\n            price: product.price,\n            initialAvailableQuantity: product.stock,\n            currentQuantity: availableQuantity\n          });\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function (_x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.get('/reserve_product/:itemId', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res) {\n    var itemId, product, currentStock, newStock;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          itemId = parseInt(req.params.itemId);\n          product = getItemById(itemId);\n          if (product) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.json({\n            status: 'Product not found'\n          }));\n        case 1:\n          _context2.n = 2;\n          return getCurrentReservedStockById(itemId);\n        case 2:\n          currentStock = _context2.v;\n          if (currentStock === null) {\n            currentStock = product.stock;\n          }\n          if (!(currentStock <= 0)) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.json({\n            status: 'Not enough stock available',\n            itemId: itemId\n          }));\n        case 3:\n          newStock = currentStock - 1;\n          _context2.n = 4;\n          return reserveStockById(itemId, newStock);\n        case 4:\n          res.json({\n            status: 'Reservation confirmed',\n            itemId: itemId\n          });\n        case 5:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.listen(port, function () {\n  console.log(\"Server listening on port \".concat(port));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3JlZGlzIiwiX3V0aWwiLCJlIiwiX19lc01vZHVsZSIsIl9yZWdlbmVyYXRvciIsInQiLCJyIiwiU3ltYm9sIiwibiIsIml0ZXJhdG9yIiwibyIsInRvU3RyaW5nVGFnIiwiaSIsImMiLCJwcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJ1IiwiT2JqZWN0IiwiY3JlYXRlIiwiX3JlZ2VuZXJhdG9yRGVmaW5lMiIsImYiLCJwIiwieSIsIkciLCJ2IiwiYSIsImQiLCJiaW5kIiwibGVuZ3RoIiwibCIsIlR5cGVFcnJvciIsImNhbGwiLCJkb25lIiwidmFsdWUiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRpc3BsYXlOYW1lIiwidyIsIm0iLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZWdlbmVyYXRvckRlZmluZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9pbnZva2UiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJfYXN5bmNUb0dlbmVyYXRvciIsImFyZ3VtZW50cyIsImFwcGx5IiwiX25leHQiLCJfdGhyb3ciLCJsaXN0UHJvZHVjdHMiLCJJZCIsIm5hbWUiLCJwcmljZSIsInN0b2NrIiwiZ2V0SXRlbUJ5SWQiLCJpZCIsImZpbmQiLCJpdGVtIiwiY2xpZW50IiwicmVkaXMiLCJjcmVhdGVDbGllbnQiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJjb25jYXQiLCJtZXNzYWdlIiwiZ2V0QXN5bmMiLCJwcm9taXNpZnkiLCJnZXQiLCJzZXRBc3luYyIsInNldCIsInJlc2VydmVTdG9ja0J5SWQiLCJpdGVtSWQiLCJnZXRDdXJyZW50UmVzZXJ2ZWRTdG9ja0J5SWQiLCJfeCIsIl9nZXRDdXJyZW50UmVzZXJ2ZWRTdG9ja0J5SWQiLCJfY2FsbGVlMyIsInJlc2VydmVkU3RvY2siLCJfY29udGV4dDMiLCJwYXJzZUludCIsImZvckVhY2giLCJhcHAiLCJleHByZXNzIiwicG9ydCIsInJlcSIsInJlcyIsInByb2R1Y3RzIiwibWFwIiwiaXRlbU5hbWUiLCJpbml0aWFsQXZhaWxhYmxlUXVhbnRpdHkiLCJqc29uIiwiX3JlZiIsIl9jYWxsZWUiLCJwcm9kdWN0IiwiY3VycmVudFF1YW50aXR5IiwiYXZhaWxhYmxlUXVhbnRpdHkiLCJfY29udGV4dCIsInBhcmFtcyIsInN0YXR1cyIsIl94MiIsIl94MyIsIl9yZWYyIiwiX2NhbGxlZTIiLCJjdXJyZW50U3RvY2siLCJuZXdTdG9jayIsIl9jb250ZXh0MiIsIl94NCIsIl94NSIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiL2FseC1iYWNrZW5kLzB4MDMtcXVldWluZ19zeXN0ZW1faW5fanMvIiwic291cmNlcyI6WyI5LXN0b2NrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHJlZGlzIGZyb20gJ3JlZGlzJztcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuXG5jb25zdCBsaXN0UHJvZHVjdHMgPSBbXG4gIHsgSWQ6IDEsIG5hbWU6ICdTdWl0Y2FzZSAyNTAnLCBwcmljZTogNTAsIHN0b2NrOiA0IH0sXG4gIHsgSWQ6IDIsIG5hbWU6ICdTdWl0Y2FzZSA0NTAnLCBwcmljZTogMTAwLCBzdG9jazogMTAgfSxcbiAgeyBJZDogMywgbmFtZTogJ1N1aXRjYXNlIDY1MCcsIHByaWNlOiAzNTAsIHN0b2NrOiAyIH0sXG4gIHsgSWQ6IDQsIG5hbWU6ICdTdWl0Y2FzZSAxMDUwJywgcHJpY2U6IDU1MCwgc3RvY2s6IDUgfSxcbl07XG5cbmZ1bmN0aW9uIGdldEl0ZW1CeUlkKGlkKSB7XG4gIHJldHVybiBsaXN0UHJvZHVjdHMuZmluZChpdGVtID0+IGl0ZW0uSWQgPT09IGlkKTtcbn1cblxuY29uc3QgY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KCk7XG5cbmNsaWVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ1JlZGlzIGNsaWVudCBjb25uZWN0ZWQgdG8gdGhlIHNlcnZlcicpO1xufSk7XG5cbmNsaWVudC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBSZWRpcyBjbGllbnQgbm90IGNvbm5lY3RlZCB0byB0aGUgc2VydmVyOiAke2Vyci5tZXNzYWdlfWApO1xufSk7XG5cbmNvbnN0IGdldEFzeW5jID0gcHJvbWlzaWZ5KGNsaWVudC5nZXQpLmJpbmQoY2xpZW50KTtcbmNvbnN0IHNldEFzeW5jID0gcHJvbWlzaWZ5KGNsaWVudC5zZXQpLmJpbmQoY2xpZW50KTtcblxuZnVuY3Rpb24gcmVzZXJ2ZVN0b2NrQnlJZChpdGVtSWQsIHN0b2NrKSB7XG4gIHJldHVybiBzZXRBc3luYyhgaXRlbS4ke2l0ZW1JZH1gLCBzdG9jayk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRSZXNlcnZlZFN0b2NrQnlJZChpdGVtSWQpIHtcbiAgY29uc3QgcmVzZXJ2ZWRTdG9jayA9IGF3YWl0IGdldEFzeW5jKGBpdGVtLiR7aXRlbUlkfWApO1xuICByZXR1cm4gcmVzZXJ2ZWRTdG9jayA/IHBhcnNlSW50KHJlc2VydmVkU3RvY2spIDogbnVsbDtcbn1cblxubGlzdFByb2R1Y3RzLmZvckVhY2goaXRlbSA9PiB7XG4gIHJlc2VydmVTdG9ja0J5SWQoaXRlbS5JZCwgaXRlbS5zdG9jayk7XG59KTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgcG9ydCA9IDEyNDU7XG5cbmFwcC5nZXQoJy9saXN0X3Byb2R1Y3RzJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHByb2R1Y3RzID0gbGlzdFByb2R1Y3RzLm1hcChpdGVtID0+ICh7XG4gICAgaXRlbUlkOiBpdGVtLklkLFxuICAgIGl0ZW1OYW1lOiBpdGVtLm5hbWUsXG4gICAgcHJpY2U6IGl0ZW0ucHJpY2UsXG4gICAgaW5pdGlhbEF2YWlsYWJsZVF1YW50aXR5OiBpdGVtLnN0b2NrLFxuICB9KSk7XG4gIHJlcy5qc29uKHByb2R1Y3RzKTtcbn0pO1xuXG5hcHAuZ2V0KCcvbGlzdF9wcm9kdWN0cy86aXRlbUlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGl0ZW1JZCA9IHBhcnNlSW50KHJlcS5wYXJhbXMuaXRlbUlkKTtcbiAgY29uc3QgcHJvZHVjdCA9IGdldEl0ZW1CeUlkKGl0ZW1JZCk7XG5cbiAgaWYgKCFwcm9kdWN0KSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiAnUHJvZHVjdCBub3QgZm91bmQnIH0pO1xuICB9XG5cbiAgY29uc3QgY3VycmVudFF1YW50aXR5ID0gYXdhaXQgZ2V0Q3VycmVudFJlc2VydmVkU3RvY2tCeUlkKGl0ZW1JZCk7XG4gIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5ID0gY3VycmVudFF1YW50aXR5ICE9PSBudWxsID8gY3VycmVudFF1YW50aXR5IDogcHJvZHVjdC5zdG9jaztcblxuICByZXMuanNvbih7XG4gICAgaXRlbUlkOiBwcm9kdWN0LklkLFxuICAgIGl0ZW1OYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXG4gICAgaW5pdGlhbEF2YWlsYWJsZVF1YW50aXR5OiBwcm9kdWN0LnN0b2NrLFxuICAgIGN1cnJlbnRRdWFudGl0eTogYXZhaWxhYmxlUXVhbnRpdHksXG4gIH0pO1xufSk7XG5cbmFwcC5nZXQoJy9yZXNlcnZlX3Byb2R1Y3QvOml0ZW1JZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBpdGVtSWQgPSBwYXJzZUludChyZXEucGFyYW1zLml0ZW1JZCk7XG4gIGNvbnN0IHByb2R1Y3QgPSBnZXRJdGVtQnlJZChpdGVtSWQpO1xuXG4gIGlmICghcHJvZHVjdCkge1xuICAgIHJldHVybiByZXMuanNvbih7IHN0YXR1czogJ1Byb2R1Y3Qgbm90IGZvdW5kJyB9KTtcbiAgfVxuXG4gIGxldCBjdXJyZW50U3RvY2sgPSBhd2FpdCBnZXRDdXJyZW50UmVzZXJ2ZWRTdG9ja0J5SWQoaXRlbUlkKTtcbiAgaWYgKGN1cnJlbnRTdG9jayA9PT0gbnVsbCkge1xuICAgIGN1cnJlbnRTdG9jayA9IHByb2R1Y3Quc3RvY2s7XG4gIH1cblxuICBpZiAoY3VycmVudFN0b2NrIDw9IDApIHtcbiAgICByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6ICdOb3QgZW5vdWdoIHN0b2NrIGF2YWlsYWJsZScsIGl0ZW1JZCB9KTtcbiAgfVxuXG4gIGNvbnN0IG5ld1N0b2NrID0gY3VycmVudFN0b2NrIC0gMTtcbiAgYXdhaXQgcmVzZXJ2ZVN0b2NrQnlJZChpdGVtSWQsIG5ld1N0b2NrKTtcblxuICByZXMuanNvbih7IHN0YXR1czogJ1Jlc2VydmF0aW9uIGNvbmZpcm1lZCcsIGl0ZW1JZCB9KTtcbn0pO1xuXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYFNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9YCk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFGLE9BQUE7QUFBaUMsU0FBQUQsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxnQkFBQUEsQ0FBQTtBQUFBLFNBQUFFLGFBQUEsSUFEakMsdUtBQUFGLENBQUEsRUFBQUcsQ0FBQSxFQUFBQyxDQUFBLHdCQUFBQyxNQUFBLEdBQUFBLE1BQUEsT0FBQUMsQ0FBQSxHQUFBRixDQUFBLENBQUFHLFFBQUEsa0JBQUFDLENBQUEsR0FBQUosQ0FBQSxDQUFBSyxXQUFBLDhCQUFBQyxFQUFBTixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxD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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_redis","_util","e","__esModule","_regenerator","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","listProducts","Id","name","price","stock","getItemById","id","find","item","client","redis","createClient","on","console","log","err","concat","message","getAsync","promisify","get","setAsync","set","reserveStockById","itemId","getCurrentReservedStockById","_x","_getCurrentReservedStockById","_callee3","reservedStock","_context3","parseInt","forEach","app","express","port","req","res","products","map","itemName","initialAvailableQuantity","json","_ref","_callee","product","currentQuantity","availableQuantity","_context","params","status","_x2","_x3","_ref2","_callee2","currentStock","newStock","_context2","_x4","_x5","listen"],"sourceRoot":"/alx-backend/0x03-queuing_system_in_js/","sources":["9-stock.js"],"sourcesContent":["import express from 'express';\nimport redis from 'redis';\nimport { promisify } from 'util';\n\nconst listProducts = [\n  { Id: 1, name: 'Suitcase 250', price: 50, stock: 4 },\n  { Id: 2, name: 'Suitcase 450', price: 100, stock: 10 },\n  { Id: 3, name: 'Suitcase 650', price: 350, stock: 2 },\n  { Id: 4, name: 'Suitcase 1050', price: 550, stock: 5 },\n];\n\nfunction getItemById(id) {\n  return listProducts.find(item => item.Id === id);\n}\n\nconst client = redis.createClient();\n\nclient.on('connect', () => {\n  console.log('Redis client connected to the server');\n});\n\nclient.on('error', (err) => {\n  console.log(`Redis client not connected to the server: ${err.message}`);\n});\n\nconst getAsync = promisify(client.get).bind(client);\nconst setAsync = promisify(client.set).bind(client);\n\nfunction reserveStockById(itemId, stock) {\n  return setAsync(`item.${itemId}`, stock);\n}\n\nasync function getCurrentReservedStockById(itemId) {\n  const reservedStock = await getAsync(`item.${itemId}`);\n  return reservedStock ? parseInt(reservedStock) : null;\n}\n\nlistProducts.forEach(item => {\n  reserveStockById(item.Id, item.stock);\n});\n\nconst app = express();\nconst port = 1245;\n\napp.get('/list_products', (req, res) => {\n  const products = listProducts.map(item => ({\n    itemId: item.Id,\n    itemName: item.name,\n    price: item.price,\n    initialAvailableQuantity: item.stock,\n  }));\n  res.json(products);\n});\n\napp.get('/list_products/:itemId', async (req, res) => {\n  const itemId = parseInt(req.params.itemId);\n  const product = getItemById(itemId);\n\n  if (!product) {\n    return res.json({ status: 'Product not found' });\n  }\n\n  const currentQuantity = await getCurrentReservedStockById(itemId);\n  const availableQuantity = currentQuantity !== null ? currentQuantity : product.stock;\n\n  res.json({\n    itemId: product.Id,\n    itemName: product.name,\n    price: product.price,\n    initialAvailableQuantity: product.stock,\n    currentQuantity: availableQuantity,\n  });\n});\n\napp.get('/reserve_product/:itemId', async (req, res) => {\n  const itemId = parseInt(req.params.itemId);\n  const product = getItemById(itemId);\n\n  if (!product) {\n    return res.json({ status: 'Product not found' });\n  }\n\n  let currentStock = await getCurrentReservedStockById(itemId);\n  if (currentStock === null) {\n    currentStock = product.stock;\n  }\n\n  if (currentStock <= 0) {\n    return res.json({ status: 'Not enough stock available', itemId });\n  }\n\n  const newStock = currentStock - 1;\n  await reserveStockById(itemId, newStock);\n\n  res.json({ status: 'Reservation confirmed', itemId });\n});\n\napp.listen(port, () => {\n  console.log(`Server listening on port ${port}`);\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1750329720672},"{\"assumptions\":{},\"sourceRoot\":\"/alx-backend/0x03-queuing_system_in_js/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/alx-backend/0x03-queuing_system_in_js\",\"filename\":\"/alx-backend/0x03-queuing_system_in_js/100-seat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-backend/0x03-queuing_system_in_js\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-backend/0x03-queuing_system_in_js/node_modules/@babel/preset-env/lib/index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-backend/0x03-queuing_system_in_js/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _redis = _interopRequireDefault(require(\"redis\"));\nvar _util = require(\"util\");\nvar _kue = _interopRequireDefault(require(\"kue\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar client = _redis[\"default\"].createClient();\nclient.on('connect', function () {\n  console.log('Redis client connected to the server');\n});\nclient.on('error', function (err) {\n  console.log(\"Redis client not connected to the server: \".concat(err.message));\n});\nvar getAsync = (0, _util.promisify)(client.get).bind(client);\nvar setAsync = (0, _util.promisify)(client.set).bind(client);\nvar INITIAL_SEATS = 50;\nvar reservationEnabled = true;\nfunction reserveSeat(_x) {\n  return _reserveSeat.apply(this, arguments);\n}\nfunction _reserveSeat() {\n  _reserveSeat = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(number) {\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          _context4.n = 1;\n          return setAsync('available_seats', number);\n        case 1:\n          return _context4.a(2);\n      }\n    }, _callee4);\n  }));\n  return _reserveSeat.apply(this, arguments);\n}\nfunction getCurrentAvailableSeats() {\n  return _getCurrentAvailableSeats.apply(this, arguments);\n}\nfunction _getCurrentAvailableSeats() {\n  _getCurrentAvailableSeats = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n    var seats;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _context5.n = 1;\n          return getAsync('available_seats');\n        case 1:\n          seats = _context5.v;\n          return _context5.a(2, seats ? parseInt(seats) : 0);\n      }\n    }, _callee5);\n  }));\n  return _getCurrentAvailableSeats.apply(this, arguments);\n}\n_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n  var currentSeats;\n  return _regenerator().w(function (_context) {\n    while (1) switch (_context.n) {\n      case 0:\n        _context.n = 1;\n        return getCurrentAvailableSeats();\n      case 1:\n        currentSeats = _context.v;\n        if (!(currentSeats === 0)) {\n          _context.n = 2;\n          break;\n        }\n        _context.n = 2;\n        return reserveSeat(INITIAL_SEATS);\n      case 2:\n        return _context.a(2);\n    }\n  }, _callee);\n}))();\nvar queue = _kue[\"default\"].createQueue();\nvar app = (0, _express[\"default\"])();\nvar port = 1245;\napp.get('/available_seats', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res) {\n    var numberOfAvailableSeats;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _context2.n = 1;\n          return getCurrentAvailableSeats();\n        case 1:\n          numberOfAvailableSeats = _context2.v;\n          res.json({\n            numberOfAvailableSeats: String(numberOfAvailableSeats)\n          });\n        case 2:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.get('/reserve_seat', function (req, res) {\n  if (!reservationEnabled) {\n    return res.json({\n      status: 'Reservation are blocked'\n    });\n  }\n  var job = queue.create('reserve_seat').save(function (err) {\n    if (err) {\n      return res.json({\n        status: 'Reservation failed'\n      });\n    }\n    res.json({\n      status: 'Reservation in process'\n    });\n  });\n  job.on('complete', function () {\n    console.log(\"Seat reservation job \".concat(job.id, \" completed\"));\n  });\n  job.on('failed', function (errorMessage) {\n    console.log(\"Seat reservation job \".concat(job.id, \" failed: \").concat(errorMessage));\n  });\n});\nqueue.process('reserve_seat', 1, /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(job, done) {\n    var currentSeats, newSeats;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          _context3.n = 1;\n          return getCurrentAvailableSeats();\n        case 1:\n          currentSeats = _context3.v;\n          if (!(currentSeats <= 0)) {\n            _context3.n = 2;\n            break;\n          }\n          reservationEnabled = false;\n          return _context3.a(2, done(new Error('Not enough seats available')));\n        case 2:\n          newSeats = currentSeats - 1;\n          _context3.n = 3;\n          return reserveSeat(newSeats);\n        case 3:\n          if (newSeats === 0) {\n            reservationEnabled = false;\n          }\n          done();\n        case 4:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}());\napp.get('/process', function (req, res) {\n  res.json({\n    status: 'Queue processing'\n  });\n});\napp.listen(port, function () {\n  console.log(\"Server listening on port \".concat(port));\n});\nprocess.on('SIGINT', function () {\n  queue.shutdown(5000, function (err) {\n    console.log('Kue shutdown: ', err || 'completed');\n    process.exit(0);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3JlZGlzIiwiX3V0aWwiLCJfa3VlIiwiZSIsIl9fZXNNb2R1bGUiLCJfcmVnZW5lcmF0b3IiLCJ0IiwiciIsIlN5bWJvbCIsIm4iLCJpdGVyYXRvciIsIm8iLCJ0b1N0cmluZ1RhZyIsImkiLCJjIiwicHJvdG90eXBlIiwiR2VuZXJhdG9yIiwidSIsIk9iamVjdCIsImNyZWF0ZSIsIl9yZWdlbmVyYXRvckRlZmluZTIiLCJmIiwicCIsInkiLCJHIiwidiIsImEiLCJkIiwiYmluZCIsImxlbmd0aCIsImwiLCJUeXBlRXJyb3IiLCJjYWxsIiwiZG9uZSIsInZhbHVlIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkaXNwbGF5TmFtZSIsInciLCJtIiwiZGVmaW5lUHJvcGVydHkiLCJfcmVnZW5lcmF0b3JEZWZpbmUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfaW52b2tlIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJhcmd1bWVudHMiLCJhcHBseSIsIl9uZXh0IiwiX3Rocm93IiwiY2xpZW50IiwicmVkaXMiLCJjcmVhdGVDbGllbnQiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJjb25jYXQiLCJtZXNzYWdlIiwiZ2V0QXN5bmMiLCJwcm9taXNpZnkiLCJnZXQiLCJzZXRBc3luYyIsInNldCIsIklOSVRJQUxfU0VBVFMiLCJyZXNlcnZhdGlvbkVuYWJsZWQiLCJyZXNlcnZlU2VhdCIsIl94IiwiX3Jlc2VydmVTZWF0IiwiX2NhbGxlZTQiLCJudW1iZXIiLCJfY29udGV4dDQiLCJnZXRDdXJyZW50QXZhaWxhYmxlU2VhdHMiLCJfZ2V0Q3VycmVudEF2YWlsYWJsZVNlYXRzIiwiX2NhbGxlZTUiLCJzZWF0cyIsIl9jb250ZXh0NSIsInBhcnNlSW50IiwiX2NhbGxlZSIsImN1cnJlbnRTZWF0cyIsIl9jb250ZXh0IiwicXVldWUiLCJrdWUiLCJjcmVhdGVRdWV1ZSIsImFwcCIsImV4cHJlc3MiLCJwb3J0IiwiX3JlZjIiLCJfY2FsbGVlMiIsInJlcSIsInJlcyIsIm51bWJlck9mQXZhaWxhYmxlU2VhdHMiLCJfY29udGV4dDIiLCJqc29uIiwiU3RyaW5nIiwiX3gyIiwiX3gzIiwic3RhdHVzIiwiam9iIiwic2F2ZSIsImlkIiwiZXJyb3JNZXNzYWdlIiwicHJvY2VzcyIsIl9yZWYzIiwiX2NhbGxlZTMiLCJuZXdTZWF0cyIsIl9jb250ZXh0MyIsIkVycm9yIiwiX3g0IiwiX3g1IiwibGlzdGVuIiwic2h1dGRvd24iLCJleGl0Il0sInNvdXJjZVJvb3QiOiIvYWx4LWJhY2tlbmQvMHgwMy1xdWV1aW5nX3N5c3RlbV9pbl9qcy8iLCJzb3VyY2VzIjpbIjEwMC1zZWF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHJlZGlzIGZyb20gJ3JlZGlzJztcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IGt1ZSBmcm9tICdrdWUnO1xuXG5jb25zdCBjbGllbnQgPSByZWRpcy5jcmVhdGVDbGllbnQoKTtcblxuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnUmVkaXMgY2xpZW50IGNvbm5lY3RlZCB0byB0aGUgc2VydmVyJyk7XG59KTtcblxuY2xpZW50Lm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coYFJlZGlzIGNsaWVudCBub3QgY29ubmVjdGVkIHRvIHRoZSBzZXJ2ZXI6ICR7ZXJyLm1lc3NhZ2V9YCk7XG59KTtcblxuY29uc3QgZ2V0QXN5bmMgPSBwcm9taXNpZnkoY2xpZW50LmdldCkuYmluZChjbGllbnQpO1xuY29uc3Qgc2V0QXN5bmMgPSBwcm9taXNpZnkoY2xpZW50LnNldCkuYmluZChjbGllbnQpO1xuXG5jb25zdCBJTklUSUFMX1NFQVRTID0gNTA7XG5sZXQgcmVzZXJ2YXRpb25FbmFibGVkID0gdHJ1ZTtcblxuYXN5bmMgZnVuY3Rpb24gcmVzZXJ2ZVNlYXQobnVtYmVyKSB7XG4gIGF3YWl0IHNldEFzeW5jKCdhdmFpbGFibGVfc2VhdHMnLCBudW1iZXIpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50QXZhaWxhYmxlU2VhdHMoKSB7XG4gIGNvbnN0IHNlYXRzID0gYXdhaXQgZ2V0QXN5bmMoJ2F2YWlsYWJsZV9zZWF0cycpO1xuICByZXR1cm4gc2VhdHMgPyBwYXJzZUludChzZWF0cykgOiAwO1xufVxuXG4oYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50U2VhdHMgPSBhd2FpdCBnZXRDdXJyZW50QXZhaWxhYmxlU2VhdHMoKTtcbiAgaWYgKGN1cnJlbnRTZWF0cyA9PT0gMCkge1xuICAgIGF3YWl0IHJlc2VydmVTZWF0KElOSVRJQUxfU0VBVFMpO1xuICB9XG59KSgpO1xuXG5jb25zdCBxdWV1ZSA9IGt1ZS5jcmVhdGVRdWV1ZSgpO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gMTI0NTtcblxuYXBwLmdldCgnL2F2YWlsYWJsZV9zZWF0cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBudW1iZXJPZkF2YWlsYWJsZVNlYXRzID0gYXdhaXQgZ2V0Q3VycmVudEF2YWlsYWJsZVNlYXRzKCk7XG4gIHJlcy5qc29uKHsgbnVtYmVyT2ZBdmFpbGFibGVTZWF0czogU3RyaW5nKG51bWJlck9mQXZhaWxhYmxlU2VhdHMpIH0pO1xufSk7XG5cbmFwcC5nZXQoJy9yZXNlcnZlX3NlYXQnLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKCFyZXNlcnZhdGlvbkVuYWJsZWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oeyBzdGF0dXM6ICdSZXNlcnZhdGlvbiBhcmUgYmxvY2tlZCcgfSk7XG4gIH1cblxuICBjb25zdCBqb2IgPSBxdWV1ZS5jcmVhdGUoJ3Jlc2VydmVfc2VhdCcpLnNhdmUoKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJldHVybiByZXMuanNvbih7IHN0YXR1czogJ1Jlc2VydmF0aW9uIGZhaWxlZCcgfSk7XG4gICAgfVxuICAgIHJlcy5qc29uKHsgc3RhdHVzOiAnUmVzZXJ2YXRpb24gaW4gcHJvY2VzcycgfSk7XG4gIH0pO1xuXG4gIGpvYi5vbignY29tcGxldGUnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coYFNlYXQgcmVzZXJ2YXRpb24gam9iICR7am9iLmlkfSBjb21wbGV0ZWRgKTtcbiAgfSk7XG5cbiAgam9iLm9uKCdmYWlsZWQnLCAoZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc29sZS5sb2coYFNlYXQgcmVzZXJ2YXRpb24gam9iICR7am9iLmlkfSBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWApO1xuICB9KTtcbn0pO1xuXG5xdWV1ZS5wcm9jZXNzKCdyZXNlcnZlX3NlYXQnLCAxLCBhc3luYyAoam9iLCBkb25lKSA9PiB7XG4gIGxldCBjdXJyZW50U2VhdHMgPSBhd2FpdCBnZXRDdXJyZW50QXZhaWxhYmxlU2VhdHMoKTtcblxuICBpZiAoY3VycmVudFNlYXRzIDw9IDApIHtcbiAgICByZXNlcnZhdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gZG9uZShuZXcgRXJyb3IoJ05vdCBlbm91Z2ggc2VhdHMgYXZhaWxhYmxlJykpO1xuICB9XG5cbiAgY29uc3QgbmV3U2VhdHMgPSBjdXJyZW50U2VhdHMgLSAxO1xuICBhd2FpdCByZXNlcnZlU2VhdChuZXdTZWF0cyk7XG5cbiAgaWYgKG5ld1NlYXRzID09PSAwKSB7XG4gICAgcmVzZXJ2YXRpb25FbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBkb25lKCk7XG59KTtcblxuYXBwLmdldCgnL3Byb2Nlc3MnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oeyBzdGF0dXM6ICdRdWV1ZSBwcm9jZXNzaW5nJyB9KTtcbn0pO1xuXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYFNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9YCk7XG59KTtcblxucHJvY2Vzcy5vbignU0lHSU5UJywgKCkgPT4ge1xuICBxdWV1ZS5zaHV0ZG93big1MDAwLCAoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0t1ZSBzaHV0ZG93bjogJywgZXJyIHx8ICdjb21wbGV0ZWQnKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsSUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQXNCLFNBQUFELHVCQUFBSyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsZ0JBQUFBLENBQUE7QUFBQSxTQUFBRSxhQUFBLElBRnRCLHVLQUFBRixDQUFBLEVBQUFHLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFBQSxDQUFBSCxDQUFBLHVCQUFBVixDQUFB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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_redis","_util","_kue","e","__esModule","_regenerator","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","client","redis","createClient","on","console","log","err","concat","message","getAsync","promisify","get","setAsync","set","INITIAL_SEATS","reservationEnabled","reserveSeat","_x","_reserveSeat","_callee4","number","_context4","getCurrentAvailableSeats","_getCurrentAvailableSeats","_callee5","seats","_context5","parseInt","_callee","currentSeats","_context","queue","kue","createQueue","app","express","port","_ref2","_callee2","req","res","numberOfAvailableSeats","_context2","json","String","_x2","_x3","status","job","save","id","errorMessage","process","_ref3","_callee3","newSeats","_context3","Error","_x4","_x5","listen","shutdown","exit"],"sourceRoot":"/alx-backend/0x03-queuing_system_in_js/","sources":["100-seat.js"],"sourcesContent":["import express from 'express';\nimport redis from 'redis';\nimport { promisify } from 'util';\nimport kue from 'kue';\n\nconst client = redis.createClient();\n\nclient.on('connect', () => {\n  console.log('Redis client connected to the server');\n});\n\nclient.on('error', (err) => {\n  console.log(`Redis client not connected to the server: ${err.message}`);\n});\n\nconst getAsync = promisify(client.get).bind(client);\nconst setAsync = promisify(client.set).bind(client);\n\nconst INITIAL_SEATS = 50;\nlet reservationEnabled = true;\n\nasync function reserveSeat(number) {\n  await setAsync('available_seats', number);\n}\n\nasync function getCurrentAvailableSeats() {\n  const seats = await getAsync('available_seats');\n  return seats ? parseInt(seats) : 0;\n}\n\n(async () => {\n  const currentSeats = await getCurrentAvailableSeats();\n  if (currentSeats === 0) {\n    await reserveSeat(INITIAL_SEATS);\n  }\n})();\n\nconst queue = kue.createQueue();\n\nconst app = express();\nconst port = 1245;\n\napp.get('/available_seats', async (req, res) => {\n  const numberOfAvailableSeats = await getCurrentAvailableSeats();\n  res.json({ numberOfAvailableSeats: String(numberOfAvailableSeats) });\n});\n\napp.get('/reserve_seat', (req, res) => {\n  if (!reservationEnabled) {\n    return res.json({ status: 'Reservation are blocked' });\n  }\n\n  const job = queue.create('reserve_seat').save((err) => {\n    if (err) {\n      return res.json({ status: 'Reservation failed' });\n    }\n    res.json({ status: 'Reservation in process' });\n  });\n\n  job.on('complete', () => {\n    console.log(`Seat reservation job ${job.id} completed`);\n  });\n\n  job.on('failed', (errorMessage) => {\n    console.log(`Seat reservation job ${job.id} failed: ${errorMessage}`);\n  });\n});\n\nqueue.process('reserve_seat', 1, async (job, done) => {\n  let currentSeats = await getCurrentAvailableSeats();\n\n  if (currentSeats <= 0) {\n    reservationEnabled = false;\n    return done(new Error('Not enough seats available'));\n  }\n\n  const newSeats = currentSeats - 1;\n  await reserveSeat(newSeats);\n\n  if (newSeats === 0) {\n    reservationEnabled = false;\n  }\n\n  done();\n});\n\napp.get('/process', (req, res) => {\n  res.json({ status: 'Queue processing' });\n});\n\napp.listen(port, () => {\n  console.log(`Server listening on port ${port}`);\n});\n\nprocess.on('SIGINT', () => {\n  queue.shutdown(5000, (err) => {\n    console.log('Kue shutdown: ', err || 'completed');\n    process.exit(0);\n  });\n});\n"],"mappings":";;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,IAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAAsB,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAAA,SAAAE,aAAA,IAFtB,uKAAAF,CAAA,EAAAG,CAAA,EAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,WAAA,8BAAAC,EAAAN,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAC,CAAA,GAAAL,CAAA,IAAAA,CAAA,CAAAM,SAAA,YAAAC,SAAA,GAAAP,CAAA,GAAAO,SAAA,EAAAC,CAAA,GAAAC,MAAA,CAAAC,MAAA,CAAAL,CAAA,CAAAC,SAAA,UAAAK,mBAAA,CAAAH,CAAA,uBAAAV,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAE,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAI,CAAA,MAAAC,CAAA,GAAAX,CAAA,QAAAY,CAAA,OAAAC,CAAA,KAAAF,CAAA,KAAAb,CAAA,KAAAgB,CAAA,EAAAtB,CAAA,EAAAuB,CAAA,EAAAC,CAAA,EAAAN,CAAA,EAAAM,CAAA,CAAAC,IAAA,CAAAzB,CAAA,MAAAwB,CAAA,WAAAA,EAAArB,CAAA,EAAAC,CAAA,WAAAM,CAAA,GAAAP,CAAA,EAAAQ,CAAA,MAAAG,CAAA,GAAAd,CAAA,EAAAqB,CAAA,CAAAf,CAAA,GAAAF,CAAA,EAAAmB,CAAA,gBAAAC,EAAApB,CAAA,EAAAE,CAAA,SAAAK,CAAA,GAAAP,CAAA,EAAAU,CAAA,GAAAR,CAAA,EAAAH,CAAA,OAAAiB,CAAA,IAAAF,CAAA,KAAAV,CAAA,IAAAL,CAAA,GAAAgB,CAAA,CAAAO,MAAA,EAAAvB,CAAA,UAAAK,CAAA,EAAAE,CAAA,GAAAS,CAAA,CAAAhB,CAAA,GAAAqB,CAAA,GAAAH,CAAA,CAAAF,CAAA,EAAAQ,CAAA,GAAAjB,CAAA,KAAAN,CAAA,QAAAI,CAAA,GAAAmB,CAAA,KAAArB,CAAA,MAAAQ,CAAA,GAAAJ,CAAA,EAAAC,CAAA,GAAAD,CAAA,YAAAC,CAAA,WAAAD,CAAA,MAAAA,CAAA,MAAAV,CAAA,IAAAU,CAAA,OAAAc,CAAA,MAAAhB,CAAA,GAAAJ,CAAA,QAAAoB,CAAA,GAAAd,CAAA,QAAAC,CAAA,MAAAU,CAAA,CAAAC,CAAA,GAAAhB,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAI,CAAA,OAAAc,CAAA,GAAAG,CAAA,KAAAnB,CAAA,GAAAJ,CAAA,QAAAM,CAAA,MAAAJ,CAAA,IAAAA,CAAA,GAAAqB,CAAA,MAAAjB,CAAA,MAAAN,CAAA,EAAAM,CAAA,MAAAJ,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAqB,CAAA,EAAAhB,CAAA,cAAAH,CAAA,IAAAJ,CAAA,aAAAmB,CAAA,QAAAH,CAAA,OAAAd,CAAA,qBAAAE,CAAA,EAAAW,CAAA,EAAAQ,CAAA,QAAAT,CAAA,YAAAU,SAAA,uCAAAR,CAAA,UAAAD,CAAA,IAAAK,CAAA,CAAAL,CAAA,EAAAQ,CAAA,GAAAhB,CAAA,GAAAQ,CAAA,EAAAL,CAAA,GAAAa,CAAA,GAAAxB,CAAA,GAAAQ,CAAA,OAAAX,CAAA,GAAAc,CAAA,MAAAM,CAAA,KAAAV,CAAA,KAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,SAAAU,CAAA,CAAAf,CAAA,QAAAkB,CAAA,CAAAb,CAAA,EAAAG,CAAA,KAAAO,CAAA,CAAAf,CAAA,GAAAQ,CAAA,GAAAO,CAAA,CAAAC,CAAA,GAAAR,CAAA,aAAAI,CAAA,MAAAR,CAAA,QAAAC,CAAA,KAAAH,CAAA,YAAAL,CAAA,GAAAO,CAAA,CAAAF,CAAA,WAAAL,CAAA,GAAAA,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,EAAAI,CAAA,UAAAc,SAAA,2CAAAzB,CAAA,CAAA2B,IAAA,SAAA3B,CAAA,EAAAW,CAAA,GAAAX,CAAA,CAAA4B,KAAA,EAAApB,CAAA,SAAAA,CAAA,oBAAAA,CAAA,KAAAR,CAAA,GAAAO,CAAA,eAAAP,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,GAAAC,CAAA,SAAAG,CAAA,GAAAc,SAAA,uCAAApB,CAAA,gBAAAG,CAAA,OAAAD,CAAA,GAAAV,CAAA,cAAAG,CAAA,IAAAiB,CAAA,GAAAC,CAAA,CAAAf,CAAA,QAAAQ,CAAA,GAAAV,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,EAAAe,CAAA,OAAAE,CAAA,kBAAApB,CAAA,IAAAO,CAAA,GAAAV,CAAA,EAAAW,CAAA,MAAAG,CAAA,GAAAX,CAAA,cAAAe,CAAA,mBAAAa,KAAA,EAAA5B,CAAA,EAAA2B,IAAA,EAAAV,CAAA,SAAAhB,CAAA,EAAAI,CAAA,EAAAE,CAAA,QAAAI,CAAA,QAAAS,CAAA,gBAAAV,UAAA,cAAAmB,kBAAA,cAAAC,2BAAA,KAAA9B,CAAA,GAAAY,MAAA,CAAAmB,cAAA,MAAAvB,CAAA,MAAAL,CAAA,IAAAH,CAAA,CAAAA,CAAA,IAAAG,CAAA,SAAAW,mBAAA,CAAAd,CAAA,OAAAG,CAAA,iCAAAH,CAAA,GAAAW,CAAA,GAAAmB,0BAAA,CAAArB,SAAA,GAAAC,SAAA,CAAAD,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAL,CAAA,YAAAO,EAAAlB,CAAA,WAAAe,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAnC,CAAA,EAAAiC,0BAAA,KAAAjC,CAAA,CAAAoC,SAAA,GAAAH,0BAAA,EAAAhB,mBAAA,CAAAjB,CAAA,EAAAQ,CAAA,yBAAAR,CAAA,CAAAY,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAF,CAAA,GAAAd,CAAA,WAAAgC,iBAAA,CAAApB,SAAA,GAAAqB,0BAAA,EAAAhB,mBAAA,CAAAH,CAAA,iBAAAmB,0BAAA,GAAAhB,mBAAA,CAAAgB,0BAAA,iBAAAD,iBAAA,GAAAA,iBAAA,CAAAK,WAAA,wBAAApB,mBAAA,CAAAgB,0BAAA,EAAAzB,CAAA,wBAAAS,mBAAA,CAAAH,CAAA,GAAAG,mBAAA,CAAAH,CAAA,EAAAN,CAAA,gBAAAS,mBAAA,CAAAH,CAAA,EAAAR,CAAA,iCAAAW,mBAAA,CAAAH,CAAA,8DAAAZ,YAAA,YAAAA,aAAA,aAAAoC,CAAA,EAAA5B,CAAA,EAAA6B,CAAA,EAAArB,CAAA;AAAA,SAAAD,oBAAAjB,CAAA,EAAAI,CAAA,EAAAE,CAAA,EAAAH,CAAA,QAAAO,CAAA,GAAAK,MAAA,CAAAyB,cAAA,QAAA9B,CAAA,uBAAAV,CAAA,IAAAU,CAAA,QAAAO,mBAAA,YAAAwB,mBAAAzC,CAAA,EAAAI,CAAA,EAAAE,CAAA,EAAAH,CAAA,QAAAC,CAAA,EAAAM,CAAA,GAAAA,CAAA,CAAAV,CAAA,EAAAI,CAAA,IAAA2B,KAAA,EAAAzB,CAAA,EAAAoC,UAAA,GAAAvC,CAAA,EAAAwC,YAAA,GAAAxC,CAAA,EAAAyC,QAAA,GAAAzC,CAAA,MAAAH,CAAA,CAAAI,CAAA,IAAAE,CAAA,YAAAE,CAAA,YAAAA,EAAAJ,CAAA,EAAAE,CAAA,IAAAW,mBAAA,CAAAjB,CAAA,EAAAI,CAAA,YAAAJ,CAAA,gBAAA6C,OAAA,CAAAzC,CAAA,EAAAE,CAAA,EAAAN,CAAA,UAAAQ,CAAA,aAAAA,CAAA,cAAAA,CAAA,oBAAAS,mBAAA,CAAAjB,CAAA,EAAAI,CAAA,EAAAE,CAAA,EAAAH,CAAA;AAAA,SAAA2C,mBAAAxC,CAAA,EAAAH,CAAA,EAAAH,CAAA,EAAAI,CAAA,EAAAI,CAAA,EAAAe,CAAA,EAAAZ,CAAA,cAAAD,CAAA,GAAAJ,CAAA,CAAAiB,CAAA,EAAAZ,CAAA,GAAAG,CAAA,GAAAJ,CAAA,CAAAqB,KAAA,WAAAzB,CAAA,gBAAAN,CAAA,CAAAM,CAAA,KAAAI,CAAA,CAAAoB,IAAA,GAAA3B,CAAA,CAAAW,CAAA,IAAAiC,OAAA,CAAAC,OAAA,CAAAlC,CAAA,EAAAmC,IAAA,CAAA7C,CAAA,EAAAI,CAAA;AAAA,SAAA0C,kBAAA5C,CAAA,6BAAAH,CAAA,SAAAH,CAAA,GAAAmD,SAAA,aAAAJ,OAAA,WAAA3C,CAAA,EAAAI,CAAA,QAAAe,CAAA,GAAAjB,CAAA,CAAA8C,KAAA,CAAAjD,CAAA,EAAAH,CAAA,YAAAqD,MAAA/C,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,UAAAhD,CAAA,cAAAgD,OAAAhD,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,WAAAhD,CAAA,KAAA+C,KAAA;AAIA,IAAME,MAAM,GAAGC,iBAAK,CAACC,YAAY,CAAC,CAAC;AAEnCF,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,YAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;AACrD,CAAC,CAAC;AAEFL,MAAM,CAACG,EAAE,CAAC,OAAO,EAAE,UAACG,GAAG,EAAK;EAC1BF,OAAO,CAACC,GAAG,8CAAAE,MAAA,CAA8CD,GAAG,CAACE,OAAO,CAAE,CAAC;AACzE,CAAC,CAAC;AAEF,IAAMC,QAAQ,GAAG,IAAAC,eAAS,EAACV,MAAM,CAACW,GAAG,CAAC,CAACzC,IAAI,CAAC8B,MAAM,CAAC;AACnD,IAAMY,QAAQ,GAAG,IAAAF,eAAS,EAACV,MAAM,CAACa,GAAG,CAAC,CAAC3C,IAAI,CAAC8B,MAAM,CAAC;AAEnD,IAAMc,aAAa,GAAG,EAAE;AACxB,IAAIC,kBAAkB,GAAG,IAAI;AAAC,SAEfC,WAAWA,CAAAC,EAAA;EAAA,OAAAC,YAAA,CAAArB,KAAA,OAAAD,SAAA;AAAA;AAAA,SAAAsB,aAAA;EAAAA,YAAA,GAAAvB,iBAAA,cAAAhD,YAAA,GAAAqC,CAAA,CAA1B,SAAAmC,SAA2BC,MAAM;IAAA,OAAAzE,YAAA,GAAAoC,CAAA,WAAAsC,SAAA;MAAA,kBAAAA,SAAA,CAAAtE,CAAA;QAAA;UAAAsE,SAAA,CAAAtE,CAAA;UAAA,OACzB6D,QAAQ,CAAC,iBAAiB,EAAEQ,MAAM,CAAC;QAAA;UAAA,OAAAC,SAAA,CAAArD,CAAA;MAAA;IAAA,GAAAmD,QAAA;EAAA,CAC1C;EAAA,OAAAD,YAAA,CAAArB,KAAA,OAAAD,SAAA;AAAA;AAAA,SAEc0B,wBAAwBA,CAAA;EAAA,OAAAC,yBAAA,CAAA1B,KAAA,OAAAD,SAAA;AAAA;AAAA,SAAA2B,0BAAA;EAAAA,yBAAA,GAAA5B,iBAAA,cAAAhD,YAAA,GAAAqC,CAAA,CAAvC,SAAAwC,SAAA;IAAA,IAAAC,KAAA;IAAA,OAAA9E,YAAA,GAAAoC,CAAA,WAAA2C,SAAA;MAAA,kBAAAA,SAAA,CAAA3E,CAAA;QAAA;UAAA2E,SAAA,CAAA3E,CAAA;UAAA,OACsB0D,QAAQ,CAAC,iBAAiB,CAAC;QAAA;UAAzCgB,KAAK,GAAAC,SAAA,CAAA3D,CAAA;UAAA,OAAA2D,SAAA,CAAA1D,CAAA,IACJyD,KAAK,GAAGE,QAAQ,CAACF,KAAK,CAAC,GAAG,CAAC;MAAA;IAAA,GAAAD,QAAA;EAAA,CACnC;EAAA,OAAAD,yBAAA,CAAA1B,KAAA,OAAAD,SAAA;AAAA;AAEDD,iBAAA,cAAAhD,YAAA,GAAAqC,CAAA,CAAC,SAAA4C,QAAA;EAAA,IAAAC,YAAA;EAAA,OAAAlF,YAAA,GAAAoC,CAAA,WAAA+C,QAAA;IAAA,kBAAAA,QAAA,CAAA/E,CAAA;MAAA;QAAA+E,QAAA,CAAA/E,CAAA;QAAA,OAC4BuE,wBAAwB,CAAC,CAAC;MAAA;QAA/CO,YAAY,GAAAC,QAAA,CAAA/D,CAAA;QAAA,MACd8D,YAAY,KAAK,CAAC;UAAAC,QAAA,CAAA/E,CAAA;UAAA;QAAA;QAAA+E,QAAA,CAAA/E,CAAA;QAAA,OACdiE,WAAW,CAACF,aAAa,CAAC;MAAA;QAAA,OAAAgB,QAAA,CAAA9D,CAAA;IAAA;EAAA,GAAA4D,OAAA;AAAA,CAEnC,GAAE,CAAC;AAEJ,IAAMG,KAAK,GAAGC,eAAG,CAACC,WAAW,CAAC,CAAC;AAE/B,IAAMC,GAAG,GAAG,IAAAC,mBAAO,EAAC,CAAC;AACrB,IAAMC,IAAI,GAAG,IAAI;AAEjBF,GAAG,CAACvB,GAAG,CAAC,kBAAkB;EAAA,IAAA0B,KAAA,GAAA1C,iBAAA,cAAAhD,YAAA,GAAAqC,CAAA,CAAE,SAAAsD,SAAOC,GAAG,EAAEC,GAAG;IAAA,IAAAC,sBAAA;IAAA,OAAA9F,YAAA,GAAAoC,CAAA,WAAA2D,SAAA;MAAA,kBAAAA,SAAA,CAAA3F,CAAA;QAAA;UAAA2F,SAAA,CAAA3F,CAAA;UAAA,OACJuE,wBAAwB,CAAC,CAAC;QAAA;UAAzDmB,sBAAsB,GAAAC,SAAA,CAAA3E,CAAA;UAC5ByE,GAAG,CAACG,IAAI,CAAC;YAAEF,sBAAsB,EAAEG,MAAM,CAACH,sBAAsB;UAAE,CAAC,CAAC;QAAC;UAAA,OAAAC,SAAA,CAAA1E,CAAA;MAAA;IAAA,GAAAsE,QAAA;EAAA,CACtE;EAAA,iBAAAO,GAAA,EAAAC,GAAA;IAAA,OAAAT,KAAA,CAAAxC,KAAA,OAAAD,SAAA;EAAA;AAAA,IAAC;AAEFsC,GAAG,CAACvB,GAAG,CAAC,eAAe,EAAE,UAAC4B,GAAG,EAAEC,GAAG,EAAK;EACrC,IAAI,CAACzB,kBAAkB,EAAE;IACvB,OAAOyB,GAAG,CAACG,IAAI,CAAC;MAAEI,MAAM,EAAE;IAA0B,CAAC,CAAC;EACxD;EAEA,IAAMC,GAAG,GAAGjB,KAAK,CAACtE,MAAM,CAAC,cAAc,CAAC,CAACwF,IAAI,CAAC,UAAC3C,GAAG,EAAK;IACrD,IAAIA,GAAG,EAAE;MACP,OAAOkC,GAAG,CAACG,IAAI,CAAC;QAAEI,MAAM,EAAE;MAAqB,CAAC,CAAC;IACnD;IACAP,GAAG,CAACG,IAAI,CAAC;MAAEI,MAAM,EAAE;IAAyB,CAAC,CAAC;EAChD,CAAC,CAAC;EAEFC,GAAG,CAAC7C,EAAE,CAAC,UAAU,EAAE,YAAM;IACvBC,OAAO,CAACC,GAAG,yBAAAE,MAAA,CAAyByC,GAAG,CAACE,EAAE,eAAY,CAAC;EACzD,CAAC,CAAC;EAEFF,GAAG,CAAC7C,EAAE,CAAC,QAAQ,EAAE,UAACgD,YAAY,EAAK;IACjC/C,OAAO,CAACC,GAAG,yBAAAE,MAAA,CAAyByC,GAAG,CAACE,EAAE,eAAA3C,MAAA,CAAY4C,YAAY,CAAE,CAAC;EACvE,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFpB,KAAK,CAACqB,OAAO,CAAC,cAAc,EAAE,CAAC;EAAA,IAAAC,KAAA,GAAA1D,iBAAA,cAAAhD,YAAA,GAAAqC,CAAA,CAAE,SAAAsE,SAAON,GAAG,EAAEzE,IAAI;IAAA,IAAAsD,YAAA,EAAA0B,QAAA;IAAA,OAAA5G,YAAA,GAAAoC,CAAA,WAAAyE,SAAA;MAAA,kBAAAA,SAAA,CAAAzG,CAAA;QAAA;UAAAyG,SAAA,CAAAzG,CAAA;UAAA,OACtBuE,wBAAwB,CAAC,CAAC;QAAA;UAA/CO,YAAY,GAAA2B,SAAA,CAAAzF,CAAA;UAAA,MAEZ8D,YAAY,IAAI,CAAC;YAAA2B,SAAA,CAAAzG,CAAA;YAAA;UAAA;UACnBgE,kBAAkB,GAAG,KAAK;UAAC,OAAAyC,SAAA,CAAAxF,CAAA,IACpBO,IAAI,CAAC,IAAIkF,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAAA;UAGhDF,QAAQ,GAAG1B,YAAY,GAAG,CAAC;UAAA2B,SAAA,CAAAzG,CAAA;UAAA,OAC3BiE,WAAW,CAACuC,QAAQ,CAAC;QAAA;UAE3B,IAAIA,QAAQ,KAAK,CAAC,EAAE;YAClBxC,kBAAkB,GAAG,KAAK;UAC5B;UAEAxC,IAAI,CAAC,CAAC;QAAC;UAAA,OAAAiF,SAAA,CAAAxF,CAAA;MAAA;IAAA,GAAAsF,QAAA;EAAA,CACR;EAAA,iBAAAI,GAAA,EAAAC,GAAA;IAAA,OAAAN,KAAA,CAAAxD,KAAA,OAAAD,SAAA;EAAA;AAAA,IAAC;AAEFsC,GAAG,CAACvB,GAAG,CAAC,UAAU,EAAE,UAAC4B,GAAG,EAAEC,GAAG,EAAK;EAChCA,GAAG,CAACG,IAAI,CAAC;IAAEI,MAAM,EAAE;EAAmB,CAAC,CAAC;AAC1C,CAAC,CAAC;AAEFb,GAAG,CAAC0B,MAAM,CAACxB,IAAI,EAAE,YAAM;EACrBhC,OAAO,CAACC,GAAG,6BAAAE,MAAA,CAA6B6B,IAAI,CAAE,CAAC;AACjD,CAAC,CAAC;AAEFgB,OAAO,CAACjD,EAAE,CAAC,QAAQ,EAAE,YAAM;EACzB4B,KAAK,CAAC8B,QAAQ,CAAC,IAAI,EAAE,UAACvD,GAAG,EAAK;IAC5BF,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,GAAG,IAAI,WAAW,CAAC;IACjD8C,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}},"mtime":1750330874698}}